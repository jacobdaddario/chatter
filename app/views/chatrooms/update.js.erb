var flash = document.querySelector("[data-behavior='flash'");
var errors = document.querySelector("[data-behavior='chatroom-errors'");
var oldText = document.querySelector("[data-chatroom-id='<%= @chatroom.id %>'")
											.querySelector("[data-behavior='chatroom-name'");

if (oldText.nodeName == "DIV") {
	oldButton = document.querySelector("[data-chatroom-id='<%= @chatroom.id %>'")
											.querySelector("[data-behavior='chatroom-text']");
};

var form = document.querySelector("[data-temp-form-parent-id='<%= @chatroom.id %>']")

flash.innerHTML = "<%= j render('layouts/flash') %>";
errors.innerHTML = "<%= j render('layouts/errors', errors: @chatroom.errors) %>";

<% if @chatroom.errors.empty? %>
	if (oldText.nodeName == "A") {
		oldText.text = "<%= j @chatroom.name %>";
	} else {
		oldButton.value = "<%= j @chatroom.name %>";
	};

	oldText.classList.remove("hidden");

	form.remove();
<% end %>